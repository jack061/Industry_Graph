$(window).load(function () {
    $(".loading").fadeOut()
})
$(function () {
    updateData();
    init();
    Init_Event();
    LoadGraph(5);
})
function init() {
    window.setInterval(updateData, 5000);
}
function updateData() {
    //根据Id获取最新的一条数据
    var $table = $(".table1");
    $.each($table, function () {
        var deviceId = $(this).attr("deviceId");
        var $this = $(this);
        $.ajax({
            url: '/GatewayVal/GetNewestData',
            data: {
                queryJson: JSON.stringify({ deviceId: deviceId })
            },
            async: false,
            dataType: "json",
            success: function (data) {
                for (var i = 0; i < data.length; i++) {
                    $this.find("tr[id='" + data[i]["ParameterCode"] + "'] td:eq(1) span").text(data[i]["ParameterValue"]);
                }
            }
        })
    })
}

function Init_Event() {
    $(".mainbox table").bind("click", function () {
        $(".graph div:eq(0) span").text($(this).attr("deviceName"));

    })
}

function LoadGraph(deviceId) {
    var data = [[1559039337000, 414],
    [1559039937000, 116],
    [1559040537000, 575],
    [1559041137000, 612],
    [1559041737000, 768]];
    var powerData = LoadGraphData(deviceId, "power");
    var temperatureData = LoadGraphData(deviceId, "temperature");
    var humidityData = LoadGraphData(deviceId, "humidity");
    Highcharts.setOptions({
        lang: {
            rangeSelectorZoom: '', // 不显示 'zoom' 文字
            resetZoom: '重置',
            resetZoomTitle: '重置缩放比例'
        }
    })
    var chart = null;
    $('#container').highcharts('StockChart', {
        inverted: true,
        zoomType: 'x',
        responsive: {
            rules: [{
                condition: {
                    maxWidth: 500
                },
                chartOptions: {
                    legend: {
                        align: 'center',
                        verticalAlign: 'bottom',
                        layout: 'horizontal'
                    },
                    yAxis: {
                        labels: {
                            align: 'left',
                            x: 0,
                            y: -5
                        },
                        title: {
                            text: null
                        }
                    },
                    subtitle: {
                        text: null
                    },
                    credits: {
                        enabled: false
                    }
                }
            }]
        },
        rangeSelector: {
            buttons: [{
                type: 'hour',
                count: 1,
                text: '1小时'
            }, {
                type: 'day',
                count: 1,
                text: '一天'
            }, {
                type: 'day',
                count: 7,
                text: '七天'
            }, {
                type: 'month',
                count: 1,
                text: '一月'
            }, {
                type: 'all',
                count: 1,
                text: 'All'
            }],
            selected: 1,
            inputEnabled: true
        },
        title: {
            text: '电机电量采集'
        },
        series: [{
            name: '电量',
            data: data,
            tooltip: {
                valueDecimals: 2
            }
        }],
        xAxis: {
            events: {
                // 范围选择器改变的范围最终是改变坐标轴的范围，所以我们监听坐标的极值变更事件函数即可
                afterSetExtremes: function (e) {
                    // e.min 和 e.max 为坐标轴当前的范围
                    //alert(e.min + ":" + e.max);
                    console.log(e.min, e.max);
                }
            }
        },
        yAxis: { opposite: false },
        legend: { layout: "vertical", align: "right", verticalAlign: "middle" },
        plotOptions: { series: { label: { connectorAllowed: false }, pointStart: 2010 } },
        responsive: { rules: [{ condition: { maxWidth: 500 }, chartOptions: { legend: { layout: "horizontal", align: "center", verticalAlign: "bottom" } } }] }, function(c) {
            chart = c;
        }
    });

    $('#container2').highcharts('StockChart', {
        inverted: true,
        zoomType: 'x',
        responsive: {
            rules: [{
                condition: {
                    maxWidth: 500
                },
                chartOptions: {
                    legend: {
                        align: 'center',
                        verticalAlign: 'bottom',
                        layout: 'horizontal'
                    },
                    yAxis: {
                        labels: {
                            align: 'left',
                            x: 0,
                            y: -5
                        },
                        title: {
                            text: null
                        }
                    },
                    subtitle: {
                        text: null
                    },
                    credits: {
                        enabled: false
                    }
                }
            }]
        },
        rangeSelector: {
            buttons: [{
                type: 'hour',
                count: 1,
                text: '1小时'
            }, {
                type: 'day',
                count: 1,
                text: '一天'
            }, {
                type: 'day',
                count: 7,
                text: '七天'
            }, {
                type: 'month',
                count: 1,
                text: '一月'
            }, {
                type: 'all',
                count: 1,
                text: 'All'
            }],
            selected: 1,
            inputEnabled: true
        },
        title: {
            text: '电机温度采集'
        },
        series: [{
            name: '温度',
            data: [
                [1559000937000, 586],
                [1559001537000, 742],
                [1559002137000, 308],
                [1559002737000, 498],
                [1559003337000, 147],
                [1559003937000, 331],
                [1559004537000, 277],
                [1559005137000, 743],
                [1559005737000, 869],
                [1559006337000, 270],
                [1559006937000, 797],
                [1559007537000, 385],
                [1559008137000, 234],
                [1559008737000, 925],
                [1559009337000, 772],
                [1559009937000, 819],
                [1559010537000, 580],
                [1559011137000, 587],
                [1559011737000, 979],
                [1559012337000, 492],
                [1559012937000, 170],
                [1559013537000, 910],
                [1559014137000, 757],
                [1559014737000, 370],
                [1559015337000, 460],
                [1559015937000, 679],
                [1559016537000, 429],
                [1559017137000, 866],
                [1559017737000, 802],
                [1559018337000, 281],
                [1559018937000, 465],
                [1559019537000, 417],
                [1559020137000, 850],
                [1559020737000, 609],
                [1559021337000, 359],
                [1559021937000, 190],
                [1559022537000, 477],
                [1559023137000, 274],
                [1559023737000, 389],
                [1559024337000, 506],
                [1559024937000, 571],
                [1559025537000, 287],
                [1559026137000, 526],
                [1559026737000, 856],
                [1559027337000, 150],
                [1559027937000, 703],
                [1559028537000, 354],
                [1559029137000, 75],
                [1559029737000, 993],
                [1559030337000, 91],
                [1559030937000, 65],
                [1559031537000, 111],
                [1559032137000, 946],
                [1559032737000, 817],
                [1559033337000, 970],
                [1559033937000, 685],
                [1559034537000, 594],
                [1559035137000, 872],
                [1559035737000, 813],
                [1559036337000, 563],
                [1559036937000, 144],
                [1559037537000, 223],
                [1559038137000, 702],
                [1559038737000, 276],
                [1559039337000, 414],
                [1559039937000, 116],
                [1559040537000, 575],
                [1559041137000, 612],
                [1559041737000, 768],
                [1559042337000, 304],
                [1559042937000, 702],
                [1559043537000, 202],
                [1559044137000, 304],
                [1559044737000, 204],
                [1559045337000, 513],
                [1559045937000, 753],
                [1559046537000, 429],
                [1559047137000, 760],
                [1559047737000, 945],
                [1559048337000, 272],
                [1559048937000, 586],
                [1559049537000, 238],
                [1559050137000, 769],
                [1559050737000, 250],
                [1559051337000, 422],
                [1559051937000, 452],
                [1559052537000, 553],
                [1559053137000, 248],
                [1559053737000, 805],
                [1559054337000, 798],
                [1559054937000, 199],
                [1559055537000, 927],
                [1559056137000, 501],
                [1559056737000, 394],
                [1559057337000, 363],
                [1559057937000, 865],
                [1559058537000, 404],
                [1559059137000, 641],
                [1559059737000, 481],
                [1559060337000, 959],
                [1559060937000, 393],
                [1559061537000, 596],
                [1559062137000, 874],
                [1559062737000, 386],
                [1559063337000, 684],
                [1559063937000, 943],
                [1559064537000, 445],
                [1559065137000, 839],
                [1559065737000, 609],
                [1559066337000, 1000],
                [1559066937000, 820],
                [1559067537000, 536],
                [1559068137000, 912],
                [1559068737000, 806],
                [1559069337000, 244],
                [1559069937000, 141],
                [1559070537000, 202],
                [1559071137000, 132],
                [1559071737000, 413],
                [1559072337000, 735],
                [1559072937000, 524],
                [1559073537000, 644],
                [1559074137000, 308],
                [1559074737000, 669],
                [1559075337000, 187],
                [1559075937000, 582],
                [1559076537000, 566],
                [1559077137000, 184],
                [1559077737000, 801],
                [1559078337000, 916],
                [1559078937000, 801],
                [1559079537000, 546],
                [1559080137000, 199],
                [1559080737000, 768],
                [1559081337000, 997],
                [1559081937000, 359],
                [1559082537000, 250],
                [1559083137000, 568],
                [1559083737000, 151],
                [1559084337000, 945],
                [1559084937000, 364],
                [1559085537000, 870],
                [1559086137000, 244],
                [1559086737000, 664],
                [1559087337000, 592],
                [1559087937000, 163],
                [1559088537000, 577],
                [1559089137000, 206],
                [1559089737000, 244],
                [1559090337000, 686],
                [1559090937000, 987],
                [1559091537000, 927],
                [1559092137000, 699],
                [1559092737000, 629],
                [1559093337000, 778],
                [1559093937000, 954],
                [1559094537000, 337],
                [1559095137000, 652],
                [1559095737000, 556],
                [1559096337000, 514],
                [1559096937000, 922],
                [1559097537000, 183],
                [1559098137000, 772],
                [1559098737000, 872],
                [1559099337000, 233],
                [1559099937000, 428],
                [1559100537000, 447],
                [1559101137000, 597],
                [1559101737000, 589],
                [1559102337000, 402],
                [1559102937000, 608],
                [1559103537000, 935],
                [1559104137000, 496],
                [1559104737000, 216],
                [1559105337000, 899],
                [1559105937000, 430],
                [1559106537000, 550],
                [1559107137000, 734],
                [1559107737000, 637],
                [1559108337000, 380],
                [1559108937000, 456],
                [1559109537000, 898],
                [1559110137000, 985],
                [1559110737000, 474],
                [1559111337000, 448],
                [1559111937000, 408],
                [1559112537000, 729],
                [1559113137000, 425],
                [1559113737000, 690],
                [1559114337000, 981],
                [1559114937000, 527],
                [1559115537000, 453],
                [1559116137000, 282],
                [1559116737000, 231],
                [1559117337000, 271],
                [1559117937000, 914],
                [1559118537000, 325],
                [1559119137000, 516],
                [1559119737000, 939],
                [1559120337000, 641],
                [1559120937000, 608],
                [1559121537000, 852],
                [1559122137000, 983],
                [1559122737000, 611],
                [1559123337000, 250],
                [1559123937000, 477],
                [1559124537000, 627],
                [1559125137000, 793],
                [1559125737000, 462],
                [1559126337000, 254],
                [1559126937000, 601],
                [1559127537000, 533],
                [1559128137000, 565],
                [1559128737000, 291],
                [1559129337000, 397],
                [1559129937000, 983],
                [1559130537000, 629],
                [1559131137000, 278],
                [1559131737000, 727],
                [1559132337000, 337],
                [1559132937000, 466],
                [1559133537000, 258],
                [1559134137000, 390],
                [1559134737000, 455],
                [1559135337000, 613],
                [1559135937000, 450],
                [1559136537000, 771],
                [1559137137000, 241],
                [1559137737000, 578],
                [1559138337000, 1000],
                [1559138937000, 445],
                [1559139537000, 873],
                [1559140137000, 557],
                [1559140737000, 595],
                [1559141337000, 875],
                [1559141937000, 684],
                [1559142537000, 989],
                [1559143137000, 337],
                [1559143737000, 988],
                [1559144337000, 556],
                [1559144937000, 607],
                [1559145537000, 786],
                [1559146137000, 660],
                [1559146737000, 465],
                [1559147337000, 907],
                [1559147937000, 263],
                [1559148537000, 442],
                [1559149137000, 996],
                [1559149737000, 896],
                [1559150337000, 860],
                [1559150937000, 775],
                [1559151537000, 468],
                [1559152137000, 874],
                [1559152737000, 823],
                [1559153337000, 796],
                [1559153937000, 748],
                [1559154537000, 502],
                [1559155137000, 425],
                [1559155737000, 269],
                [1559156337000, 331],
                [1559156937000, 882],
                [1559157537000, 463],
                [1559158137000, 466],
                [1559158737000, 515],
                [1559159337000, 573],
                [1559159937000, 343],
                [1559160537000, 472],
                [1559161137000, 644],
                [1559161737000, 731],
                [1559162337000, 354],
                [1559162937000, 655],
                [1559163537000, 943],
                [1559164137000, 702],
                [1559164737000, 594],
                [1559165337000, 701],
                [1559165937000, 904],
                [1559166537000, 812],
                [1559167137000, 410],
                [1559167737000, 490],
                [1559168337000, 517],
                [1559168937000, 915],
                [1559169537000, 561],
                [1559170137000, 440],
                [1559170737000, 457],
                [1559171337000, 633],
                [1559171937000, 501],
                [1559172537000, 917],
                [1559173137000, 383],
                [1559173737000, 365],
                [1559174337000, 358],
                [1559174937000, 920],
                [1559175537000, 495],
                [1559176137000, 426],
                [1559176737000, 428],
                [1559177337000, 898],
                [1559177937000, 457],
                [1559178537000, 335],
                [1559179137000, 540],
                [1559179737000, 745],
                [1559180337000, 759],
                [1559180937000, 610],
                [1559181537000, 806],
                [1559182137000, 662],
                [1559182737000, 828],
                [1559183337000, 662],
                [1559183937000, 371],
                [1559184537000, 928],
                [1559185137000, 355],
                [1559185737000, 805],
                [1559186337000, 848],
                [1559186937000, 598],
                [1559187537000, 800],
                [1559188137000, 827],
                [1559188737000, 990],
                [1559189337000, 685],
                [1559189937000, 468],
                [1559190537000, 777],
                [1559191137000, 749],
                [1559191737000, 981],
                [1559192337000, 678],
                [1559192937000, 446],
                [1559193537000, 938],
                [1559194137000, 693],
                [1559194737000, 439],
                [1559195337000, 714],
                [1559195937000, 733],
                [1559196537000, 537],
                [1559197137000, 596],
                [1559197737000, 839],
                [1559198337000, 658],
                [1559198937000, 594],
                [1559199537000, 638],
                [1559200137000, 782],
                [1559200737000, 960],
                [1559201337000, 643],
                [1559201937000, 586],
                [1559202537000, 567],
                [1559203137000, 890],
                [1559203737000, 422],
                [1559204337000, 645],
                [1559204937000, 744],
                [1559205537000, 831],
                [1559206137000, 791],
                [1559206737000, 563],
                [1559207337000, 740],
                [1559207937000, 736],
                [1559208537000, 745],
                [1559209137000, 920],
                [1559209737000, 427],
                [1559210337000, 713],
                [1559210937000, 640],
                [1559211537000, 987],
                [1559212137000, 644],
                [1559212737000, 735],
                [1559213337000, 934],
                [1559213937000, 547],
                [1559214537000, 808],
                [1559215137000, 880],
                [1559215737000, 735],
                [1559216337000, 656],
                [1559216937000, 891],
                [1559217537000, 825],
                [1559218137000, 517],
                [1559218737000, 734],
                [1559219337000, 523],
                [1559219937000, 859],
                [1559220537000, 797],
                [1559221137000, 547],
                [1559221737000, 391],
                [1559222337000, 649],
                [1559222937000, 493],
                [1559223537000, 946],
                [1559224137000, 794],
                [1559224737000, 916],
                [1559225337000, 849],
                [1559225937000, 787],
                [1559226537000, 619],
                [1559227137000, 603],
                [1559227737000, 432],
                [1559228337000, 566],
                [1559228937000, 426],
                [1559229537000, 813],
                [1559230137000, 517],
                [1559230737000, 427],
                [1559231337000, 843],
                [1559231937000, 485],
                [1559232537000, 610],
                [1559233137000, 987],
                [1559233737000, 523],
                [1559234337000, 713]
            ],
            tooltip: {
                valueDecimals: 2
            }
        }],
        xAxis: {
            events: {
                // 范围选择器改变的范围最终是改变坐标轴的范围，所以我们监听坐标的极值变更事件函数即可
                afterSetExtremes: function (e) {
                    // e.min 和 e.max 为坐标轴当前的范围
                    //alert(e.min + ":" + e.max);
                    console.log(e.min, e.max);
                }
            }
        },
        yAxis: { opposite: false },
        legend: { layout: "vertical", align: "right", verticalAlign: "middle" },
        plotOptions: { series: { label: { connectorAllowed: false }, pointStart: 2010 } },
        responsive: { rules: [{ condition: { maxWidth: 500 }, chartOptions: { legend: { layout: "horizontal", align: "center", verticalAlign: "bottom" } } }] }, function(c) {
            chart = c;
        }
    });

    $('#container3').highcharts('StockChart', {
        inverted: true,
        zoomType: 'x',
        responsive: {
            rules: [{
                condition: {
                    maxWidth: 500
                },
                chartOptions: {
                    legend: {
                        align: 'center',
                        verticalAlign: 'bottom',
                        layout: 'horizontal'
                    },
                    yAxis: {
                        labels: {
                            align: 'left',
                            x: 0,
                            y: -5
                        },
                        title: {
                            text: null
                        }
                    },
                    subtitle: {
                        text: null
                    },
                    credits: {
                        enabled: false
                    }
                }
            }]
        },
        rangeSelector: {
            buttons: [{
                type: 'hour',
                count: 1,
                text: '1小时'
            }, {
                type: 'day',
                count: 1,
                text: '一天'
            }, {
                type: 'day',
                count: 7,
                text: '七天'
            }, {
                type: 'month',
                count: 1,
                text: '一月'
            }, {
                type: 'all',
                count: 1,
                text: 'All'
            }],
            selected: 1,
            inputEnabled: true
        },
        title: {
            text: '电机湿度采集'
        },
        series: [{
            name: '湿度',
            data: [
                [1559000937000, 586],
                [1559001537000, 742],
                [1559002137000, 308],
                [1559002737000, 498],
                [1559003337000, 147],
                [1559003937000, 331],
                [1559004537000, 277],
                [1559005137000, 743],
                [1559005737000, 869],
                [1559006337000, 270],
                [1559006937000, 797],
                [1559007537000, 385],
                [1559008137000, 234],
                [1559008737000, 925],
                [1559009337000, 772],
                [1559009937000, 819],
                [1559010537000, 580],
                [1559011137000, 587],
                [1559011737000, 979],
                [1559012337000, 492],
                [1559012937000, 170],
                [1559013537000, 910],
                [1559014137000, 757],
                [1559014737000, 370],
                [1559015337000, 460],
                [1559015937000, 679],
                [1559016537000, 429],
                [1559017137000, 866],
                [1559017737000, 802],
                [1559018337000, 281],
                [1559018937000, 465],
                [1559019537000, 417],
                [1559020137000, 850],
                [1559020737000, 609],
                [1559021337000, 359],
                [1559021937000, 190],
                [1559022537000, 477],
                [1559023137000, 274],
                [1559023737000, 389],
                [1559024337000, 506],
                [1559024937000, 571],
                [1559025537000, 287],
                [1559026137000, 526],
                [1559026737000, 856],
                [1559027337000, 150],
                [1559027937000, 703],
                [1559028537000, 354],
                [1559029137000, 75],
                [1559029737000, 993],
                [1559030337000, 91],
                [1559030937000, 65],
                [1559031537000, 111],
                [1559032137000, 946],
                [1559032737000, 817],
                [1559033337000, 970],
                [1559033937000, 685],
                [1559034537000, 594],
                [1559035137000, 872],
                [1559035737000, 813],
                [1559036337000, 563],
                [1559036937000, 144],
                [1559037537000, 223],
                [1559038137000, 702],
                [1559038737000, 276],
                [1559039337000, 414],
                [1559039937000, 116],
                [1559040537000, 575],
                [1559041137000, 612],
                [1559041737000, 768],
                [1559042337000, 304],
                [1559042937000, 702],
                [1559043537000, 202],
                [1559044137000, 304],
                [1559044737000, 204],
                [1559045337000, 513],
                [1559045937000, 753],
                [1559046537000, 429],
                [1559047137000, 760],
                [1559047737000, 945],
                [1559048337000, 272],
                [1559048937000, 586],
                [1559049537000, 238],
                [1559050137000, 769],
                [1559050737000, 250],
                [1559051337000, 422],
                [1559051937000, 452],
                [1559052537000, 553],
                [1559053137000, 248],
                [1559053737000, 805],
                [1559054337000, 798],
                [1559054937000, 199],
                [1559055537000, 927],
                [1559056137000, 501],
                [1559056737000, 394],
                [1559057337000, 363],
                [1559057937000, 865],
                [1559058537000, 404],
                [1559059137000, 641],
                [1559059737000, 481],
                [1559060337000, 959],
                [1559060937000, 393],
                [1559061537000, 596],
                [1559062137000, 874],
                [1559062737000, 386],
                [1559063337000, 684],
                [1559063937000, 943],
                [1559064537000, 445],
                [1559065137000, 839],
                [1559065737000, 609],
                [1559066337000, 1000],
                [1559066937000, 820],
                [1559067537000, 536],
                [1559068137000, 912],
                [1559068737000, 806],
                [1559069337000, 244],
                [1559069937000, 141],
                [1559070537000, 202],
                [1559071137000, 132],
                [1559071737000, 413],
                [1559072337000, 735],
                [1559072937000, 524],
                [1559073537000, 644],
                [1559074137000, 308],
                [1559074737000, 669],
                [1559075337000, 187],
                [1559075937000, 582],
                [1559076537000, 566],
                [1559077137000, 184],
                [1559077737000, 801],
                [1559078337000, 916],
                [1559078937000, 801],
                [1559079537000, 546],
                [1559080137000, 199],
                [1559080737000, 768],
                [1559081337000, 997],
                [1559081937000, 359],
                [1559082537000, 250],
                [1559083137000, 568],
                [1559083737000, 151],
                [1559084337000, 945],
                [1559084937000, 364],
                [1559085537000, 870],
                [1559086137000, 244],
                [1559086737000, 664],
                [1559087337000, 592],
                [1559087937000, 163],
                [1559088537000, 577],
                [1559089137000, 206],
                [1559089737000, 244],
                [1559090337000, 686],
                [1559090937000, 987],
                [1559091537000, 927],
                [1559092137000, 699],
                [1559092737000, 629],
                [1559093337000, 778],
                [1559093937000, 954],
                [1559094537000, 337],
                [1559095137000, 652],
                [1559095737000, 556],
                [1559096337000, 514],
                [1559096937000, 922],
                [1559097537000, 183],
                [1559098137000, 772],
                [1559098737000, 872],
                [1559099337000, 233],
                [1559099937000, 428],
                [1559100537000, 447],
                [1559101137000, 597],
                [1559101737000, 589],
                [1559102337000, 402],
                [1559102937000, 608],
                [1559103537000, 935],
                [1559104137000, 496],
                [1559104737000, 216],
                [1559105337000, 899],
                [1559105937000, 430],
                [1559106537000, 550],
                [1559107137000, 734],
                [1559107737000, 637],
                [1559108337000, 380],
                [1559108937000, 456],
                [1559109537000, 898],
                [1559110137000, 985],
                [1559110737000, 474],
                [1559111337000, 448],
                [1559111937000, 408],
                [1559112537000, 729],
                [1559113137000, 425],
                [1559113737000, 690],
                [1559114337000, 981],
                [1559114937000, 527],
                [1559115537000, 453],
                [1559116137000, 282],
                [1559116737000, 231],
                [1559117337000, 271],
                [1559117937000, 914],
                [1559118537000, 325],
                [1559119137000, 516],
                [1559119737000, 939],
                [1559120337000, 641],
                [1559120937000, 608],
                [1559121537000, 852],
                [1559122137000, 983],
                [1559122737000, 611],
                [1559123337000, 250],
                [1559123937000, 477],
                [1559124537000, 627],
                [1559125137000, 793],
                [1559125737000, 462],
                [1559126337000, 254],
                [1559126937000, 601],
                [1559127537000, 533],
                [1559128137000, 565],
                [1559128737000, 291],
                [1559129337000, 397],
                [1559129937000, 983],
                [1559130537000, 629],
                [1559131137000, 278],
                [1559131737000, 727],
                [1559132337000, 337],
                [1559132937000, 466],
                [1559133537000, 258],
                [1559134137000, 390],
                [1559134737000, 455],
                [1559135337000, 613],
                [1559135937000, 450],
                [1559136537000, 771],
                [1559137137000, 241],
                [1559137737000, 578],
                [1559138337000, 1000],
                [1559138937000, 445],
                [1559139537000, 873],
                [1559140137000, 557],
                [1559140737000, 595],
                [1559141337000, 875],
                [1559141937000, 684],
                [1559142537000, 989],
                [1559143137000, 337],
                [1559143737000, 988],
                [1559144337000, 556],
                [1559144937000, 607],
                [1559145537000, 786],
                [1559146137000, 660],
                [1559146737000, 465],
                [1559147337000, 907],
                [1559147937000, 263],
                [1559148537000, 442],
                [1559149137000, 996],
                [1559149737000, 896],
                [1559150337000, 860],
                [1559150937000, 775],
                [1559151537000, 468],
                [1559152137000, 874],
                [1559152737000, 823],
                [1559153337000, 796],
                [1559153937000, 748],
                [1559154537000, 502],
                [1559155137000, 425],
                [1559155737000, 269],
                [1559156337000, 331],
                [1559156937000, 882],
                [1559157537000, 463],
                [1559158137000, 466],
                [1559158737000, 515],
                [1559159337000, 573],
                [1559159937000, 343],
                [1559160537000, 472],
                [1559161137000, 644],
                [1559161737000, 731],
                [1559162337000, 354],
                [1559162937000, 655],
                [1559163537000, 943],
                [1559164137000, 702],
                [1559164737000, 594],
                [1559165337000, 701],
                [1559165937000, 904],
                [1559166537000, 812],
                [1559167137000, 410],
                [1559167737000, 490],
                [1559168337000, 517],
                [1559168937000, 915],
                [1559169537000, 561],
                [1559170137000, 440],
                [1559170737000, 457],
                [1559171337000, 633],
                [1559171937000, 501],
                [1559172537000, 917],
                [1559173137000, 383],
                [1559173737000, 365],
                [1559174337000, 358],
                [1559174937000, 920],
                [1559175537000, 495],
                [1559176137000, 426],
                [1559176737000, 428],
                [1559177337000, 898],
                [1559177937000, 457],
                [1559178537000, 335],
                [1559179137000, 540],
                [1559179737000, 745],
                [1559180337000, 759],
                [1559180937000, 610],
                [1559181537000, 806],
                [1559182137000, 662],
                [1559182737000, 828],
                [1559183337000, 662],
                [1559183937000, 371],
                [1559184537000, 928],
                [1559185137000, 355],
                [1559185737000, 805],
                [1559186337000, 848],
                [1559186937000, 598],
                [1559187537000, 800],
                [1559188137000, 827],
                [1559188737000, 990],
                [1559189337000, 685],
                [1559189937000, 468],
                [1559190537000, 777],
                [1559191137000, 749],
                [1559191737000, 981],
                [1559192337000, 678],
                [1559192937000, 446],
                [1559193537000, 938],
                [1559194137000, 693],
                [1559194737000, 439],
                [1559195337000, 714],
                [1559195937000, 733],
                [1559196537000, 537],
                [1559197137000, 596],
                [1559197737000, 839],
                [1559198337000, 658],
                [1559198937000, 594],
                [1559199537000, 638],
                [1559200137000, 782],
                [1559200737000, 960],
                [1559201337000, 643],
                [1559201937000, 586],
                [1559202537000, 567],
                [1559203137000, 890],
                [1559203737000, 422],
                [1559204337000, 645],
                [1559204937000, 744],
                [1559205537000, 831],
                [1559206137000, 791],
                [1559206737000, 563],
                [1559207337000, 740],
                [1559207937000, 736],
                [1559208537000, 745],
                [1559209137000, 920],
                [1559209737000, 427],
                [1559210337000, 713],
                [1559210937000, 640],
                [1559211537000, 987],
                [1559212137000, 644],
                [1559212737000, 735],
                [1559213337000, 934],
                [1559213937000, 547],
                [1559214537000, 808],
                [1559215137000, 880],
                [1559215737000, 735],
                [1559216337000, 656],
                [1559216937000, 891],
                [1559217537000, 825],
                [1559218137000, 517],
                [1559218737000, 734],
                [1559219337000, 523],
                [1559219937000, 859],
                [1559220537000, 797],
                [1559221137000, 547],
                [1559221737000, 391],
                [1559222337000, 649],
                [1559222937000, 493],
                [1559223537000, 946],
                [1559224137000, 794],
                [1559224737000, 916],
                [1559225337000, 849],
                [1559225937000, 787],
                [1559226537000, 619],
                [1559227137000, 603],
                [1559227737000, 432],
                [1559228337000, 566],
                [1559228937000, 426],
                [1559229537000, 813],
                [1559230137000, 517],
                [1559230737000, 427],
                [1559231337000, 843],
                [1559231937000, 485],
                [1559232537000, 610],
                [1559233137000, 987],
                [1559233737000, 523],
                [1559234337000, 713]
            ],
            tooltip: {
                valueDecimals: 2
            }
        }],
        xAxis: {
            events: {
                // 范围选择器改变的范围最终是改变坐标轴的范围，所以我们监听坐标的极值变更事件函数即可
                afterSetExtremes: function (e) {
                    // e.min 和 e.max 为坐标轴当前的范围
                    //alert(e.min + ":" + e.max);
                    console.log(e.min, e.max);
                }
            }
        },
        yAxis: { opposite: false },
        legend: {
            layout: 'vertical',
            backgroundColor: '#FFFFFF',
            floating: true,
            align: 'left',
            x: 100,
            verticalAlign: 'top',
            y: 70
        },
        plotOptions: { series: { label: { connectorAllowed: false }, pointStart: 2010 } },
        responsive: { rules: [{ condition: { maxWidth: 500 }, chartOptions: { legend: { layout: "horizontal", align: "center", verticalAlign: "bottom" } } }] }, function(c) {
            chart = c;
        }
    });
}
function LoadGraphData(deviceId, ParameterCode) {
    var graphArray = [];
    $.ajax({
        url: '/GatewayVal/GetHistoryData',
        data: {
            queryJson: JSON.stringify({ deviceId: deviceId, ParameterCode: ParameterCode })
        },
        async: false,
        dataType: "json",
        success: function (data) {
            for (var i = 0; i < data.length; i++) {
                graphArray.push([data[i]["timeSpan"], data[i]["ParameterValue"]]);
            }
        }
    })
    return graphArray;
}
















